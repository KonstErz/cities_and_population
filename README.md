# Города и население

### Проект реализован с использованием стека:  

+ Python (3.8.2)  
+ Django (3.1.2)  
+ django-tables2 (2.3.2)  
+ PostgreSQL  
+ Gunicorn (20.0.4)  
+ Nginx  
+ Docker Engine (19.03.8)  

---

### Структура проекта:  

1. **Сущности:**  

+ *Континенты*, представляют собой часть света, например: Америка, Европа, Азия и т.д.  
+ *Страны*, относящиеся к определенной части света, например: США, Россия, Франция, Китай и т.д.  
+ *Города* - населенные пункты, относящиеся к конкретной стране и части света. Имеют название и численность населения (тыс. чел.)  

2. **Ресурсы:**  

+ *Административная панель* (http://localhost:1337/admin/)  
+ *Список городов (root)* (http://localhost:1337/cities/) - отображение списка городов в виде таблиц, разделенных по континентам. Только для авторизованных пользователей. Поддерживает сортировку по колонкам: название города и численность населения. В таблицах используется пагинация по 5 записей на одну страницу  
+ *Авторизация* (http://localhost:1337/login/) - аутентификация и логин пользователя в системе, перенаправление на страницу со списком городов  
+ *Регистрация пользователя* (http://localhost:1337/signup/) - регистрация нового пользователя в системе, аутентификация и логин с перенаправлением на страницу со списком городов  
+ *Выход* (http://localhost:1337/logout/) - логаут пользователя  

---


### Запуск и работа с проектом:

1. Команда на сборку образа и запуск контейнера из корневой папки проекта:

    ```
    docker-compose up -d --build
    ```

2. Создание суперпользователя:

    ```
    docker-compose exec cnp python manage.py createsuperuser
    ```

3. Переход на главную страницу http://localhost:1337/ или в админ. панель http://localhost:1337/admin/ (необходимо создать объекты в базе данных)

4. Другие команды:  

    ```
    docker-compose logs -f      # Логи запущенных сервисов (Ctrl+C для выхода)
    docker-compose down -v      # Удалить все тома вместе с контейнерами
    docker images               # Список всех запущенных образов
    docker images -a            # Список всех доступных образов
    docker ps                   # Список всех запущенных контейнеров
    docker ps -a                # Список всех доступных контейнеров
    docker stop $(docker ps -a -q)      # Остановить все контейнеры
    docker rm $(docker ps -a -q)        # Удалить все контейнеры
    docker rm <ID_or_Name>              # Удаление конкретного контейнера по ID или по имени
    docker rmi <Image_ID>               # Удаление конкретного образа по ID
    docker rmi $(docker images -f dangling=true -q)     # Удаление всех образов, не помеченных тэгами
    docker rmi $(docker images -a -q)                   # Удаление всех образов
    docker rmi -f $(docker images -a -q)                # Форсированное удаление всех образов
    ```
